{% extends 'layouts/default/page.html' %}

{% load i18n %}
{% load static %}

{% block css %}
    <link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/core/main.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/daygrid/main.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/list/main.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/timegrid/main.min.css" rel="stylesheet">
    <!-- <script src='https://unpkg.com/tooltip.js/dist/umd/tooltip.min.js'></script>  -->


{% endblock %} -->

{% block content %}
    <section class="content-header margin-bottom">
        <ol class="breadcrumb">
            <p> 
                {{request.user.company}}
                
                
                Event Categories: &nbsp;&nbsp;
            </p>
            <div style="float:left">
                <button type="button" class="btn btn-secondary btn-sm">Past Event</button>
                <button type="button" class="btn btn-primary btn-sm">Info-session</button>
                {% if request.user.is_recruiter %}
                <button type="button" class="btn btn-info btn-sm">Career Booths</button>
                {% elif request.user.is_student %}
                <button type="button" class="btn btn-info btn-sm">Interviews</button>
                {% endif %}
                <button type="button" class="btn btn-warning btn-sm">Career fair</button>
            </div>

            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            {% if request.user.is_recruiter %}
            <div style="float:right" >
                <button type="button" onclick="location.href='{% url 'event:create_event' %}'" class="btn btn-outline-success">Create Infosession</button>
                <button type="button" onclick="location.href='{% url 'career_fair:create-booth' %}'" class="btn btn-outline-success">Create Career Booth</button>
            </div>
            {% endif %}

        </ol>
  


    </section>
    <!-- Main content -->
    <section class="content">
        <div class="box box-primary">
            <div class="box-body no-padding">
                <!-- THE CALENDAR -->
                <div id="calendar">
                </div>
            </div>
            <!-- /.box-body -->
        </div>
    </section>

    <!-- /.content -->

{% endblock %}

{% block javascripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/core/main.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/daygrid/main.min.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/list/main.min.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/timegrid/main.min.js"></script> 

    
    <script>

        document.addEventListener('DOMContentLoaded', function() {
          var calendarEl = document.getElementById('calendar');
  
          var calendar = new FullCalendar.Calendar(calendarEl, {
            plugins: [ 'interaction', 'dayGrid', 'timeGrid' ],

            defaultView: 'dayGridMonth',
            header: {
            left: 'prev,next today',
            center: 'title',
            right: 'dayGridMonth,timeGridWeek,timeGridDay'
            },

            timeZone: "local",
            nowIndicator: true,

            eventTextColor: 'white',
            events: [
                    {% for i in event_list %}
                        {
                            title: '{{ i.title }}',
                            start: '{{ i.date|date:"Y-m-d" }}'+'T'+'{{ i.start_time|date:"H:i:s"}}',   // ISO8061 format
                            end: '{{ i.date|date:"Y-m-d" }}'+'T'+'{{ i.end_time|date:"H:i:s"}}',
                            url: "{% url 'event:detail' i.id %}",                                         // default color: #4c86d2  bootstrap blue:#007BFF
                        },
                    {% endfor %}

                    {% for i in past_event_list %}
                        {
                            title: '{{ i.title }}',
                            start: '{{ i.date|date:"Y-m-d" }}'+'T'+'{{ i.start_time|date:"H:i:s"}}',   // ISO8061 format
                            end: '{{ i.date|date:"Y-m-d" }}'+'T'+'{{ i.end_time|date:"H:i:s"}}',
                            url: "{% url 'event:detail' i.id %}",
                            color: '#7698C4',
                        },
                    {% endfor %}

                    {% for i in career_list %}
                        {
                            title: '{{ i.university }}'+' Career Fair',
                            start: '{{ i.firstdate|date:"Y-m-d" }}',   // ISO8061 format
                            end: '{{ i.lastdate|date:"Y-m-d" }}',
                            url: "{% url 'career_fair:detail' i.id %}",
                            color: '#FFC108',   
                        },
                    {% endfor %}

                    {% for i in past_career_list %}
                        {
                            title: '{{ i.university }}'+' Career Fair',
                            start: '{{ i.firstdate|date:"Y-m-d" }}',   // ISO8061 format
                            end: '{{ i.lastdate|date:"Y-m-d" }}',
                            url: "{% url 'career_fair:detail' i.id %}",
                            color: '#F0D477',
                        
                        },
                    {% endfor %}

                    {% for i in booth_list %}
                        {
                            title: '{{ i.booth_name }}',
                            start: '{{ i.date|date:"Y-m-d" }}',   // ISO8061 format
                            url: "{% url 'career_fair:booth_detail' i.id i.company%}",
                            color: '#16A2B8 ',
                        },
                    {% endfor %}

                    {% for i in past_booth_list %}
                        {
                            title: '{{ i.booth_name }}',
                            start: '{{ i.date|date:"Y-m-d" }}',   // ISO8061 format
                            url: "{% url 'career_fair:booth_detail' i.id i.company%}",
                            color: '#6FB0BA',
                        },
                    {% endfor %}




                
            ],
            
            // {% if request.user.is_recruiter %}
            // customButtons: {
            //     AddEvent: {
            //         text: 'Create An Event',
            //         click: function (){
            //             // location.href="{% url 'event:create_event' %}"ï¼›
            //             alert('RUN!')
            //         }
            //     },

            // },
            // {% endif %}
            customButtons: {
                custom1: {
                    text: 'custom 1',
                    click: function() {
                    // alert('clicked custom button 1!');
                    }
                },
            }

            // SHOW EVENT SUMMARY
            // eventRender: function(info) {
            //     var tooltip = new Tooltip(info.el, {
            //         title: info.event.extendedProps.description,
            //         placement: 'top',
            //         trigger: 'hover',
            //         container: 'body'
            //     });
            // },

            
            // events: [
            
            // {
            //     title: 'Click for Google',
            //     url: 'http://google.com/',
            //     start: '2020-05-28'
            // }
            // ]

            
          });
  
          calendar.render();
        });
  
    </script>

{% endblock %}


