{% extends 'layouts/default/page.html' %}

{% load i18n %}
{% load static %}

{% block css %}
    <link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/core/main.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/daygrid/main.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/list/main.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/timegrid/main.min.css" rel="stylesheet">
    <!-- <script src='https://unpkg.com/tooltip.js/dist/umd/tooltip.min.js'></script>  -->


{% endblock %} -->

{% block content %}
    <section class="content-header margin-bottom">
        <ol class="breadcrumb">
            
            <li><a href="{% url 'event:event_list' %}">All Events / </a></li>
            {% if request.user.is_recruiter %}
            <li><a href="{% url 'event:event_list' %}">/ Create Event</a></li>
            {% endif %}
            
            <p> 
            </p>     
        </ol>
  


    </section>
    <!-- Main content -->
    <section class="content">
        <div class="box box-primary">
            <div class="box-body no-padding">
                <!-- THE CALENDAR -->
                <div id="calendar">
                </div>
            </div>
            <!-- /.box-body -->
        </div>
    </section>

    <!-- /.content -->

{% endblock %}

{% block javascripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/core/main.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/daygrid/main.min.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/list/main.min.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/timegrid/main.min.js"></script> 

    
    <script>

        document.addEventListener('DOMContentLoaded', function() {
          var calendarEl = document.getElementById('calendar');
  
          var calendar = new FullCalendar.Calendar(calendarEl, {
            plugins: [ 'interaction', 'dayGrid', 'timeGrid' ],

            defaultView: 'dayGridMonth',
            header: {
            left: 'prev,next today',
            center: 'title',
            right: 'dayGridMonth,timeGridWeek,timeGridDay'
            },

            timeZone: "local",
            nowIndicator: true,

            events: [
       
                    {% for i in event_list %}
                        {
                            title: '{{ i.title }}',
                            start: '{{ i.date|date:"Y-m-d" }}'+'T'+'{{ i.start_time|date:"H:i:s"}}',   // ISO8061 format
                            end: '{{ i.date|date:"Y-m-d" }}'+'T'+'{{ i.end_time|date:"H:i:s"}}',
                            // start: '{{ i.date|date:"Y-m-d"}}'+'T'+'
                            // end: '{{ i.end_time }}',
                            // location: "{{ i.event_location }}",

                        },
                    {% endfor %}

                    {% for p in past_event_list %}
                        {
                            title: '{{ p.title }}',
                            start: '{{ p.date|date:"Y-m-d" }}'+'T'+'{{ p.start_time|date:"H:i:s"}}',   // ISO8061 format
                            end: '{{ p.date|date:"Y-m-d" }}'+'T'+'{{ p.end_time|date:"H:i:s"}}',
                            // location: "{{ i.event_location }}",
                            color: 'purple'
                        },
                    {% endfor %}

                
            ],
            
            // {% if request.user.is_recruiter %}
            // customButtons: {
            //     AddEvent: {
            //         text: 'Create An Event',
            //         click: function (){
            //             // location.href="{% url 'event:create_event' %}"ï¼›
            //             alert('RUN!')
            //         }
            //     },

            // },
            // {% endif %}
            customButtons: {
                custom1: {
                    text: 'custom 1',
                    click: function() {
                    // alert('clicked custom button 1!');
                    }
                },
            }

            // SHOW EVENT SUMMARY
            // eventRender: function(info) {
            //     var tooltip = new Tooltip(info.el, {
            //         title: info.event.extendedProps.description,
            //         placement: 'top',
            //         trigger: 'hover',
            //         container: 'body'
            //     });
            // },

            
            // events: [
            // {
            //     title: 'All Day Event',
            //     start: '2020-06-01'
            // },
            // {
            //     title: 'Long Event',
            //     start: '2020-06-07',
            //     end: '2020-06-10'
            // },
            // {
            //     groupId: '999',
            //     title: 'Repeating Event',
            //     start: '2020-06-09T16:00:00'
            // },
           
            // {
            //     title: 'Conference',
            //     start: '2020-06-11',
            //     end: '2020-06-13'
            // },
            // {
            //     title: 'Meeting',
            //     start: '2020-05-12T10:30:00',
            //     end: '2020-05-12T12:30:00'
            // },
            
            // {
            //     title: 'Click for Google',
            //     url: 'http://google.com/',
            //     start: '2020-05-28'
            // }
            // ]

            
          });
  
          calendar.render();
        });
  
    </script>

{% endblock %}

